(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a.p+"static/media/profile-avatar.845737f5.png"},46:function(e,t,a){e.exports=a(88)},55:function(e,t,a){},77:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),i=a(15),o=(a(55),a(19)),l=a(20),u=a(12),p=a(13),m=a(16),f=a(14),d=a(17),v=a(3),h=a.n(v),b=a(10),g="START_FETCH_ACTORS",E="ACTORS_FETCHED",y="FETCH_ACTORS_FAILED",F="SET_ACTIVE_TAB",T="SET_PAGE",O=a(18),A=a.n(O);function j(e){return e?A.a.get("https://swapi.co/api/films/?page=".concat(e)):A.a.get("https://swapi.co/api/films")}function C(e){return A.a.get("https://swapi.co/api/films?search=".concat(e))}function k(e){return A.a.get("https://swapi.co/api/films/".concat(e))}function L(e){return e?A.a.get("https://swapi.co/api/people/?page=".concat(e)):A.a.get("https://swapi.co/api/people")}function N(e){return A.a.get("https://swapi.co/api/people?search=".concat(e))}var _=function(e){return function(){var t=Object(b.a)(h.a.mark(function t(a){var n;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,!e){t.next=8;break}return t.next=5,j(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,j();case 10:t.t0=t.sent;case 11:n=t.t0,a({type:"ALL_FILMS_FETCHED",payload:n.data}),e&&a({type:T,payload:e}),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t1});case 19:case"end":return t.stop()}},t,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}()},w=a(4);function x(e){return function(){var t=Object(b.a)(h.a.mark(function t(a){var n,r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:g}),t.prev=1,!e){t.next=8;break}return t.next=5,L(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,L();case 10:t.t0=t.sent;case 11:return n=t.t0,e&&a({type:T,payload:e}),t.next=15,Promise.all(n.data.results.map(function(){var e=Object(b.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.films.map(function(){var e=Object(b.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t.match(/\d+/)[0]);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return a=e.sent,e.abrupt("return",Object(w.a)({},t,{films:a}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 15:r=t.sent,a({type:E,payload:Object(w.a)({},n.data,{results:r})}),t.next=22;break;case 19:t.prev=19,t.t1=t.catch(1),a({type:y,payload:t.t1});case 22:case"end":return t.stop()}},t,null,[[1,19]])}));return function(e){return t.apply(this,arguments)}}()}var S=a(21),M=a(22),I=(a(77),a(42)),P=a.n(I),H=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.isFilm,n=t.url.match(/\d+/)[0];return a?r.a.createElement("div",{className:"card"},r.a.createElement("h2",{className:"card-title"},t.title),r.a.createElement("p",{className:"one-line-text"},r.a.createElement("span",{className:"bold-start"},"Director: "),t.director),r.a.createElement("p",{className:"one-line-text"},r.a.createElement("span",{className:"bold-start"},"Producer: "),t.producer),r.a.createElement("p",{className:"one-line-text"},r.a.createElement("span",{className:"bold-start"},"Release Date: "),t.release_date),r.a.createElement(o.b,{to:"/film/".concat(n)},"More info..")):r.a.createElement("div",{className:"card media"},r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"media-container"},r.a.createElement("img",{className:"avatar",src:P.a,alt:"avatar"})),r.a.createElement("div",{className:"info-content"},r.a.createElement("p",{className:"bold-start"},t.name),r.a.createElement("p",null,"Born in ",t.birth_year),r.a.createElement("p",null,"Height: ",t.height," CM"),r.a.createElement("p",null,t.gender))),r.a.createElement("div",{className:"movies-list"},r.a.createElement("p",{className:"bold-start"},"Movies"),t.films.map(function(e){var t=e.url.match(/\d+/)[0];return r.a.createElement(o.b,{key:t,className:"list-item",to:"/film/".concat(t)},e.title)})))}}]),t}(n.Component),D=(a(83),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).getPerPage=function(e){e.preventDefault(),"Movies"===a.props.activeTab?a.props.filmsFetching(e.target.innerText):a.props.actorsFetching(e.target.innerText)},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=[],t=1;t<=this.props.totalPages;t++){var a=parseInt(this.props.activePage)===t?"active":"",n=r.a.createElement("button",{className:a,key:t,onClick:this.getPerPage},t);e.push(n)}return r.a.createElement("div",{className:"pagination"},r.a.createElement("div",null,e),r.a.createElement("div",{className:"pagination-info"},"showing item ",10*(this.props.activePage-1)+1," - ",10*(this.props.activePage-1)+this.props.items.length," of ",this.props.count," items"))}}]),t}(n.Component)),R=Object(i.b)(function(e){return{activeTab:e.actors.activeTab,activePage:e.actors.activePage}},{filmsFetching:_,actorsFetching:x})(D),B=(a(84),a(44)),K=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={userInput:"",suggestions:[],activeSelection:0,isActive:!1},a.setTab=function(e){a.props.setActiveTab(e.target.innerText)},a.inputChangeHandler=function(e){var t="Movies"===a.props.activeTab?a.filterFilms(e.target.value):a.filterActors(e.target.value);a.setState({userInput:e.target.value,suggestions:t,isActive:!0})},a.filterFilms=function(e){return a.props.films.filter(function(t){return t.title.toLowerCase().match(e.toLowerCase())})},a.filterActors=function(e){return a.props.actors.filter(function(t){return t.name.toLowerCase().match(e.toLowerCase())})},a.selectionHandler=function(e){console.log(e.target.innerText),a.setState({isActive:!1,userInput:e.target.innerText,suggestions:[],activeSelection:0})},a.onBlur=Object(B.debounce)(function(){a.setState({isActive:!1}),a.state.userInput||("Movies"===a.props.activeTab?a.props.filmsFetching():a.props.actorsFetching())},300),a.onKeyDown=function(e){var t=a.state,n=t.suggestions,r=t.activeSelection;if(13===e.keyCode)if(n.length){var s="Movies"===a.props.activeTab?n[r].title:n[r].name;a.setState({isActive:!1,userInput:s,suggestions:[]})}else a.searchClickHandler();if(38===e.keyCode){if(0===r)return;a.setState({activeSelection:r-1})}if(40===e.keyCode){if(r===n.length-1)return;a.setState({activeSelection:r+1})}},a.searchClickHandler=function(){"Movies"===a.props.activeTab?a.props.searchFilm(a.state.userInput):a.props.searchActor(a.state.userInput)},a.renderFilms=function(){return a.props.films.map(function(e,t){return r.a.createElement(H,{key:t,data:e,isFilm:!0})})},a.renderActors=function(){return a.props.actors.map(function(e,t){return r.a.createElement(H,{key:t,data:e})})},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.filmsFetching(),this.props.actorsFetching()}},{key:"render",value:function(){var e=this,t="Movies"===this.props.activeTab?"Enter a movie name":"Enter an actor name";return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header"},"STAR WARS"),r.a.createElement("div",{className:"tabs"},r.a.createElement("button",{className:"tab ".concat("Movies"===this.props.activeTab?"active":""),onClick:this.setTab},"Movies"),r.a.createElement("button",{className:"tab ".concat("Actors"===this.props.activeTab?"active":""),onClick:this.setTab},"Actors")),r.a.createElement("div",{className:"search-input"},r.a.createElement("input",{placeholder:t,type:"text",value:this.state.userInput,autoComplete:"off",onBlur:this.onBlur,onChange:this.inputChangeHandler,onKeyDown:this.onKeyDown}),r.a.createElement("button",{className:"search-button",onClick:this.searchClickHandler},r.a.createElement(S.a,{icon:M.c})),this.state.isActive&&this.state.userInput?r.a.createElement("ul",{className:"suggestions"},this.state.suggestions.map(function(t,a){return r.a.createElement("li",{key:a,className:a===e.state.activeSelection?"active-selection":"",onClick:e.selectionHandler},"Movies"===e.props.activeTab?t.title:t.name)})):null),"Movies"===this.props.activeTab?this.props.statusFilms.loading?r.a.createElement(S.a,{className:"loading",icon:M.b}):r.a.createElement("div",{className:"cards-list"},this.renderFilms(),r.a.createElement(R,{totalPages:this.props.filmsPages,items:this.props.films,count:this.props.filmsCount})):this.props.statusActors.loading||this.props.statusFilms.loading?r.a.createElement(S.a,{className:"loading",icon:M.b}):r.a.createElement("div",{className:"cards-list"},this.renderActors(),r.a.createElement(R,{totalPages:this.props.actorsPages,items:this.props.actors,count:this.props.actorsCount})))}}]),t}(n.Component),J=Object(i.b)(function(e){return{films:e.films.data,statusFilms:e.films.status,filmsCount:e.films.count,actors:e.actors.data,statusActors:e.actors.status,actorsCount:e.actors.count,activeTab:e.actors.activeTab,filmsPages:e.films.totalPages,actorsPages:e.actors.totalPages}},{filmsFetching:_,searchFilm:function(e){return function(){var t=Object(b.a)(h.a.mark(function t(a){var n;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,t.next=4,C(e);case 4:n=t.sent,a({type:"ALL_FILMS_FETCHED",payload:n.data}),a({type:T,payload:1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t0});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},actorsFetching:x,searchActor:function(e){return function(){var t=Object(b.a)(h.a.mark(function t(a){var n,r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:g}),t.prev=1,t.next=4,N(e);case 4:n=t.sent,r=n.data.results.map(function(e){var t=[];return e.films.forEach(function(){var e=Object(b.a)(h.a.mark(function e(a){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(a.match(/\d+/)[0]);case 2:n=e.sent,t.push(n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Object(w.a)({},e,{films:t})}),a({type:E,payload:Object(w.a)({},n.data,{results:r})}),a({type:T,payload:1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:y,payload:t.t0});case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},setActiveTab:function(e){return function(t){t({type:F,payload:e})}}})(K),G=(a(86),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFilm(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.film;return r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{className:"back-link",to:"/"},r.a.createElement(S.a,{className:"icon",icon:M.a})," Back to movies search"),this.props.status.loading?r.a.createElement(S.a,{className:"loading",icon:M.b}):r.a.createElement("div",{className:"details"},r.a.createElement("h2",{className:"film-title"},e.title),r.a.createElement("p",null,r.a.createElement("span",{className:"bold-start"},"Director: "),e.director),r.a.createElement("p",null,r.a.createElement("span",{className:"bold-start"},"Producer: "),e.producer),r.a.createElement("p",null,r.a.createElement("span",{className:"bold-start"},"Release Date: "),e.release_date),r.a.createElement("p",{className:"bold-start"},"Opening crawl:"),r.a.createElement("p",null,'"',e.opening_crawl,'"')))}}]),t}(n.Component)),V=Object(i.b)(function(e){return{film:e.films.selectedFilm,status:e.films.status}},{fetchFilm:function(e){return function(){var t=Object(b.a)(h.a.mark(function t(a){var n;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,t.next=4,k(e);case 4:n=t.sent,a({type:"FETCH_FILM",payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t0});case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()}})(G);a(87);var W=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(l.a,{exact:!0,path:"/",component:J}),r.a.createElement(l.a,{path:"/film/:id",component:V})))},q=a(23),z={data:[],count:0,totalPages:1,status:{loading:!1,error:null},selectedFilm:{}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"START_FETCH_ALL_FILMS":return Object(w.a)({},e,{status:{loading:!0,error:null}});case"ALL_FILMS_FETCHED":return Object(w.a)({},e,{data:n.results,count:n.count,totalPages:Math.ceil(n.count/10),status:{loading:!1,error:null}});case"FETCH_ALL_FILMS_FAILED":return Object(w.a)({},e,{status:{loading:!1,error:n}});case"FETCH_FILM":return Object(w.a)({},e,{selectedFilm:n,status:{loading:!1,error:null}});default:return e}},U={data:[],count:0,totalPages:1,status:{loading:!1,error:null},activeTab:"Movies",activePage:1},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return Object(w.a)({},e,{status:{loading:!0,error:null}});case E:return Object(w.a)({},e,{data:n.results,count:n.count,totalPages:Math.ceil(n.count/10),status:{loading:!1,error:null}});case y:return Object(w.a)({},e,{status:{loading:!1,error:n}});case F:return Object(w.a)({},e,{activeTab:n});case T:return Object(w.a)({},e,{activePage:n});default:return e}},Y=a(45),Z=Object(q.d)(Object(q.c)({films:Q,actors:X}),Object(q.a)(Y.a));c.a.render(r.a.createElement(i.a,{store:Z},r.a.createElement(W,null)),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.6f95d79f.chunk.js.map