(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){},41:function(e,t,a){e.exports=a.p+"static/media/profile-avatar.845737f5.png"},44:function(e,t,a){e.exports=a(80)},53:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(25),c=a.n(s),i=a(19),o=(a(53),a(18)),l=a(3),u=a(4),p=a(11),m=a(12),f=a(14),h=a(13),d=a(15),v=a(5),b=a.n(v),g=a(16),E="START_FETCH_ACTORS",y="ACTORS_FETCHED",w="FETCH_ACTORS_FAILED",T="SET_ACTIVE_TAB",F="SET_PAGE",O=a(17),j=a.n(O);function A(e){return e?j.a.get("https://www.swapi.tech/api/films/?page=".concat(e,"&limit=10")):j.a.get("https://www.swapi.tech/api/films")}function C(e){return j.a.get("https://www.swapi.tech/api/films?search=".concat(e))}function _(e){return j.a.get("https://www.swapi.tech/api/films/".concat(e))}function k(e){return e?j.a.get("https://www.swapi.tech/api/people/?page=".concat(e,"&limit=10")):j.a.get("https://www.swapi.tech/api/people")}function L(e){return j.a.get("https://www.swapi.tech/api/people?search=".concat(e))}var N=function(e){return function(){var t=Object(g.a)(b.a.mark(function t(a){var r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,!e){t.next=8;break}return t.next=5,A(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,A();case 10:t.t0=t.sent;case 11:r=t.t0,a({type:"ALL_FILMS_FETCHED",payload:r.data}),e&&a({type:F,payload:e}),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t1});case 19:case"end":return t.stop()}},t,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}()};function x(e){return function(){var t=Object(g.a)(b.a.mark(function t(a){var r,n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:E}),t.prev=1,!e){t.next=8;break}return t.next=5,k(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,k(1);case 10:t.t0=t.sent;case 11:return r=t.t0,e&&a({type:F,payload:e}),t.next=15,Promise.all(r.data.results.map(function(){var e=Object(g.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t.uid,j.a.get("https://www.swapi.tech/api/people/".concat(r));case 2:return a=e.sent,e.abrupt("return",Object(u.a)({},t,a.data.result));case 4:case"end":return e.stop()}var r},e)}));return function(t){return e.apply(this,arguments)}}()));case 15:n=t.sent,a({type:y,payload:Object(u.a)({},r.data,{results:n})}),t.next=22;break;case 19:t.prev=19,t.t1=t.catch(1),a({type:w,payload:t.t1});case 22:case"end":return t.stop()}},t,null,[[1,19]])}));return function(e){return t.apply(this,arguments)}}()}var S=a(20),I=a(21),M=(a(38),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.properties.url.match(/\d+/)[0];return n.a.createElement("div",{className:"card"},n.a.createElement("h2",{className:"card-title"},e.properties.title),n.a.createElement("p",{className:"one-line-text"},n.a.createElement("span",{className:"bold-start"},"Director: "),e.properties.director),n.a.createElement("p",{className:"one-line-text"},n.a.createElement("span",{className:"bold-start"},"Producer: "),e.properties.producer),n.a.createElement("p",{className:"one-line-text"},n.a.createElement("span",{className:"bold-start"},"Release Date: "),e.properties.release_date),n.a.createElement(o.b,{to:"/film/".concat(t)},"More info.."))}}]),t}(r.Component)),P=a(41),H=a.n(P),D=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.data;return console.log(e),n.a.createElement("div",{className:"card media"},n.a.createElement("div",{className:"info"},n.a.createElement("div",{className:"media-container"},n.a.createElement("img",{className:"avatar",src:H.a,alt:"avatar"})),n.a.createElement("div",{className:"info-content"},n.a.createElement("p",{className:"bold-start"},e.name),n.a.createElement("p",null,"Born in ",e.properties.birth_year),n.a.createElement("p",null,"Height: ",e.properties.height," CM"),n.a.createElement("p",null,e.properties.gender))),n.a.createElement("div",{className:"movies-list"},n.a.createElement("p",{className:"bold-start"},"Movies"),e.films.map(function(e){var t=e.uid;return n.a.createElement(o.b,{key:t,className:"list-item",to:"/film/".concat(t)},e.properties.title)})))}}]),t}(r.Component),R=(a(75),function(e){function t(){var e,a;Object(p.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).getPerPage=function(e){e.preventDefault(),"Movies"===a.props.activeTab?a.props.filmsFetching(e.target.innerText):a.props.actorsFetching(e.target.innerText)},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){console.log("{ totalPages }",this.props.totalPages);for(var e=[],t=1;t<=this.props.totalPages;t++){var a=parseInt(this.props.activePage)===t?"active":"",r=n.a.createElement("button",{className:a,key:t,onClick:this.getPerPage},t);e.push(r)}return n.a.createElement("div",{className:"pagination"},n.a.createElement("div",null,e),n.a.createElement("div",{className:"pagination-info"},"showing item ",10*(this.props.activePage-1)+1," -"," ",10*(this.props.activePage-1)+this.props.items.length," ","of ",this.props.count," items"))}}]),t}(r.Component)),B=Object(i.b)(function(e){return{activeTab:e.actors.activeTab,activePage:e.actors.activePage}},{filmsFetching:N,actorsFetching:x})(R),K=(a(76),a(42)),J=function(e){function t(){var e,a;Object(p.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={userInput:"",suggestions:[],activeSelection:0,isActive:!1},a.setTab=function(e){a.props.setActiveTab(e.target.innerText)},a.inputChangeHandler=function(e){var t="Movies"===a.props.activeTab?a.filterFilms(e.target.value):a.filterActors(e.target.value);a.setState({userInput:e.target.value,suggestions:t,isActive:!0})},a.filterFilms=function(e){return a.props.films.filter(function(t){return t.title.toLowerCase().match(e.toLowerCase())})},a.filterActors=function(e){return a.props.actors.filter(function(t){return t.name.toLowerCase().match(e.toLowerCase())})},a.selectionHandler=function(e){console.log(e.target.innerText),a.setState({isActive:!1,userInput:e.target.innerText,suggestions:[],activeSelection:0})},a.onBlur=Object(K.debounce)(function(){a.setState({isActive:!1}),a.state.userInput||("Movies"===a.props.activeTab?a.props.filmsFetching():a.props.actorsFetching())},300),a.onKeyDown=function(e){var t=a.state,r=t.suggestions,n=t.activeSelection;if(13===e.keyCode)if(r.length){var s="Movies"===a.props.activeTab?r[n].title:r[n].name;a.setState({isActive:!1,userInput:s,suggestions:[]})}else a.searchClickHandler();if(38===e.keyCode){if(0===n)return;a.setState({activeSelection:n-1})}if(40===e.keyCode){if(n===r.length-1)return;a.setState({activeSelection:n+1})}},a.searchClickHandler=function(){"Movies"===a.props.activeTab?a.props.searchFilm(a.state.userInput):a.props.searchActor(a.state.userInput)},a.renderFilms=function(){return a.props.films.map(function(e,t){return n.a.createElement(M,{key:t,data:e})})},a.renderActors=function(){return a.props.actors.map(function(e,t){var r=a.props.films.filter(function(t){return t.properties.characters.includes(e.url)});return n.a.createElement(D,{key:t,data:Object(u.a)({},e,{films:r})})})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.filmsFetching(),this.props.actorsFetching()}},{key:"render",value:function(){var e=this,t="Movies"===this.props.activeTab?"Enter a movie name":"Enter an actor name";return n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"header"},"STAR WARS"),n.a.createElement("div",{className:"tabs"},n.a.createElement("button",{className:"tab ".concat("Movies"===this.props.activeTab?"active":""),onClick:this.setTab},"Movies"),n.a.createElement("button",{className:"tab ".concat("Actors"===this.props.activeTab?"active":""),onClick:this.setTab},"Actors")),n.a.createElement("div",{className:"search-input"},n.a.createElement("input",{placeholder:t,type:"text",value:this.state.userInput,autoComplete:"off",onBlur:this.onBlur,onChange:this.inputChangeHandler,onKeyDown:this.onKeyDown}),n.a.createElement("button",{className:"search-button",onClick:this.searchClickHandler},n.a.createElement(S.a,{icon:I.c})),this.state.isActive&&this.state.userInput?n.a.createElement("ul",{className:"suggestions"},this.state.suggestions.map(function(t,a){return n.a.createElement("li",{key:a,className:a===e.state.activeSelection?"active-selection":"",onClick:e.selectionHandler},"Movies"===e.props.activeTab?t.title:t.name)})):null),"Movies"===this.props.activeTab?this.props.statusFilms.loading?n.a.createElement(S.a,{className:"loading",icon:I.b}):n.a.createElement("div",{className:"cards-list"},this.renderFilms(),n.a.createElement(B,{totalPages:this.props.filmsPages,items:this.props.films,count:this.props.filmsCount})):this.props.statusActors.loading||this.props.statusFilms.loading?n.a.createElement(S.a,{className:"loading",icon:I.b}):n.a.createElement("div",{className:"cards-list"},this.renderActors(),n.a.createElement(B,{totalPages:this.props.actorsPages,items:this.props.actors,count:this.props.actorsCount})))}}]),t}(r.Component),G=Object(i.b)(function(e){return{films:e.films.data,statusFilms:e.films.status,filmsCount:e.films.count,actors:e.actors.data,statusActors:e.actors.status,actorsCount:e.actors.count,activeTab:e.actors.activeTab,filmsPages:e.films.totalPages,actorsPages:e.actors.totalPages}},{filmsFetching:N,searchFilm:function(e){return function(){var t=Object(g.a)(b.a.mark(function t(a){var r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,t.next=4,C(e);case 4:r=t.sent,a({type:"ALL_FILMS_FETCHED",payload:r.data}),a({type:F,payload:1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t0});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},actorsFetching:x,searchActor:function(e){return function(){var t=Object(g.a)(b.a.mark(function t(a){var r,n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:E}),t.prev=1,t.next=4,L(e);case 4:r=t.sent,n=r.data.results.map(function(e){var t=[];return e.films.forEach(function(){var e=Object(g.a)(b.a.mark(function e(a){var r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(a.match(/\d+/)[0]);case 2:r=e.sent,t.push(r);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Object(u.a)({},e,{films:t})}),a({type:y,payload:Object(u.a)({},r.data,{results:n})}),a({type:F,payload:1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:w,payload:t.t0});case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},setActiveTab:function(e){return function(t){t({type:T,payload:e})}}})(J),V=(a(78),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFilm(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.film;return n.a.createElement("div",{className:"container"},n.a.createElement(o.b,{className:"back-link",to:"/"},n.a.createElement(S.a,{className:"icon",icon:I.a})," Back to movies search"),this.props.status.loading?n.a.createElement(S.a,{className:"loading",icon:I.b}):n.a.createElement("div",{className:"details"},n.a.createElement("h2",{className:"film-title"},e.result&&e.result.properties.title),n.a.createElement("p",null,n.a.createElement("span",{className:"bold-start"},"Director: "),e.result&&e.result.properties.director),n.a.createElement("p",null,n.a.createElement("span",{className:"bold-start"},"Producer: "),e.result&&e.result.properties.producer),n.a.createElement("p",null,n.a.createElement("span",{className:"bold-start"},"Release Date: "),e.result&&e.result.properties.release_date),n.a.createElement("p",{className:"bold-start"},"Opening crawl:"),n.a.createElement("p",null,'"',e.result&&e.result.properties.opening_crawl,'"')))}}]),t}(r.Component)),W=Object(i.b)(function(e){return{film:e.films.selectedFilm,status:e.films.status}},{fetchFilm:function(e){return function(){var t=Object(g.a)(b.a.mark(function t(a){var r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,t.next=4,_(e);case 4:r=t.sent,a({type:"FETCH_FILM",payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t0});case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()}})(V);a(79);var q=function(){return n.a.createElement(o.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(l.a,{exact:!0,path:"/",component:G}),n.a.createElement(l.a,{path:"/film/:id",component:W})))},z=a(26),Q={data:[],count:0,totalPages:1,status:{loading:!1,error:null},selectedFilm:{}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"START_FETCH_ALL_FILMS":return Object(u.a)({},e,{status:{loading:!0,error:null}});case"ALL_FILMS_FETCHED":return Object(u.a)({},e,{data:r.result,count:r.result.length,totalPages:Math.ceil(r.result.length/10),status:{loading:!1,error:null}});case"FETCH_ALL_FILMS_FAILED":return Object(u.a)({},e,{status:{loading:!1,error:r}});case"FETCH_FILM":return Object(u.a)({},e,{selectedFilm:r,status:{loading:!1,error:null}});default:return e}},X={data:[],count:0,totalPages:1,status:{loading:!1,error:null},activeTab:"Movies",activePage:1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case E:return Object(u.a)({},e,{status:{loading:!0,error:null}});case y:return console.log("**",r.count,r),Object(u.a)({},e,{data:r.results,count:r.total_records,totalPages:r.total_pages,status:{loading:!1,error:null}});case w:return Object(u.a)({},e,{status:{loading:!1,error:r}});case T:return Object(u.a)({},e,{activeTab:r});case F:return Object(u.a)({},e,{activePage:r});default:return e}},Z=a(43),$=Object(z.c)(Object(z.b)({films:U,actors:Y}),Object(z.a)(Z.a));c.a.render(n.a.createElement(i.a,{store:$},n.a.createElement(q,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.e504b857.chunk.js.map