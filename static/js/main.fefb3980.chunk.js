(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){},41:function(e,t,a){e.exports=a.p+"static/media/profile-avatar.845737f5.png"},44:function(e,t,a){e.exports=a(80)},53:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(25),c=a.n(s),i=a(19),o=(a(53),a(18)),l=a(3),p=a(4),u=a(11),m=a(12),f=a(14),h=a(13),d=a(15),v=a(5),g=a.n(v),b=a(16),E="START_FETCH_ACTORS",y="ACTORS_FETCHED",w="FETCH_ACTORS_FAILED",T="SET_ACTIVE_TAB",F="SET_PAGE",O=a(17),j=a.n(O);function A(e){return e?j.a.get("https://www.swapi.tech/api/films/?page=".concat(e,"&limit=10")):j.a.get("https://www.swapi.tech/api/films")}function C(e){return j.a.get("https://www.swapi.tech/api/films?search=".concat(e))}function _(e){return j.a.get("https://www.swapi.tech/api/films/".concat(e))}function k(e){return e?j.a.get("https://www.swapi.tech/api/people/?page=".concat(e,"&limit=10")):j.a.get("https://www.swapi.tech/api/people")}function L(e){return j.a.get("https://www.swapi.tech/api/people/".concat(e))}function N(e){return j.a.get("https://www.swapi.tech/api/people/?name=".concat(e))}var x=function(e){return function(){var t=Object(b.a)(g.a.mark(function t(a){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,!e){t.next=8;break}return t.next=5,A(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,A();case 10:t.t0=t.sent;case 11:r=t.t0,a({type:"ALL_FILMS_FETCHED",payload:r.data}),e&&a({type:F,payload:e}),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t1});case 19:case"end":return t.stop()}},t,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}()};function S(e){return function(){var t=Object(b.a)(g.a.mark(function t(a){var r,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:E}),t.prev=1,!e){t.next=8;break}return t.next=5,k(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,k();case 10:t.t0=t.sent;case 11:return r=t.t0,e&&a({type:F,payload:e}),t.next=15,Promise.all(r.data.results.map(function(){var e=Object(b.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t.uid);case 2:return a=e.sent,e.abrupt("return",Object(p.a)({},t,a.data.result));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 15:n=t.sent,a({type:y,payload:Object(p.a)({},r.data,{results:n})}),t.next=22;break;case 19:t.prev=19,t.t1=t.catch(1),a({type:w,payload:t.t1});case 22:case"end":return t.stop()}},t,null,[[1,19]])}));return function(e){return t.apply(this,arguments)}}()}var M=a(20),I=a(21),P=(a(38),function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.properties.url.match(/\d+/)[0];return n.a.createElement("div",{className:"card"},n.a.createElement("h2",{className:"card-title"},e.properties.title),n.a.createElement("p",{className:"one-line-text"},n.a.createElement("span",{className:"bold-start"},"Director: "),e.properties.director),n.a.createElement("p",{className:"one-line-text"},n.a.createElement("span",{className:"bold-start"},"Producer: "),e.properties.producer),n.a.createElement("p",{className:"one-line-text"},n.a.createElement("span",{className:"bold-start"},"Release Date: "),e.properties.release_date),n.a.createElement(o.b,{to:"/film/".concat(t)},"More info.."))}}]),t}(r.Component)),H=a(41),D=a.n(H),R=function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.data;return n.a.createElement("div",{className:"card media"},n.a.createElement("div",{className:"info"},n.a.createElement("div",{className:"media-container"},n.a.createElement("img",{className:"avatar",src:D.a,alt:"avatar"})),n.a.createElement("div",{className:"info-content"},n.a.createElement("p",{className:"bold-start"},e.name),n.a.createElement("p",null,"Born in ",e.properties.birth_year),n.a.createElement("p",null,"Height: ",e.properties.height," CM"),n.a.createElement("p",null,e.properties.gender))),n.a.createElement("div",{className:"movies-list"},n.a.createElement("p",{className:"bold-start"},"Movies"),e.films.map(function(e){var t=e.uid;return n.a.createElement(o.b,{key:t,className:"list-item",to:"/film/".concat(t)},e.properties.title)})))}}]),t}(r.Component),B=(a(75),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).getPerPage=function(e){e.preventDefault(),"Movies"===a.props.activeTab?a.props.filmsFetching(e.target.innerText):a.props.actorsFetching(e.target.innerText)},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){for(var e=[],t=1;t<=this.props.totalPages;t++){var a=parseInt(this.props.activePage)===t?"active":"",r=n.a.createElement("button",{className:a,key:t,onClick:this.getPerPage},t);e.push(r)}return n.a.createElement("div",{className:"pagination"},n.a.createElement("div",null,e),n.a.createElement("div",{className:"pagination-info"},"showing item ",10*(this.props.activePage-1)+1," -"," ",10*(this.props.activePage-1)+this.props.items.length," ","of ",this.props.count," items"))}}]),t}(r.Component)),K=Object(i.b)(function(e){return{activeTab:e.actors.activeTab,activePage:e.actors.activePage}},{filmsFetching:x,actorsFetching:S})(B),J=(a(76),a(42)),G=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={userInput:"",suggestions:[],activeSelection:0,isActive:!1},a.setTab=function(e){a.props.setActiveTab(e.target.innerText),a.props.activeTab!==e.target.innerText&&("Actors"!==e.target.innerText||a.props.actors.length||a.props.actorsFetching(),"Movies"!==e.target.innerText||a.props.films.length||a.props.filmsFetching())},a.inputChangeHandler=function(e){var t="Movies"===a.props.activeTab?a.filterFilms(e.target.value):a.filterActors(e.target.value);a.setState({userInput:e.target.value,suggestions:t,isActive:!0})},a.filterFilms=function(e){return a.props.films.filter(function(t){return!t.properties.title.toLowerCase().includes(e.toLowerCase())})},a.filterActors=function(e){return a.props.actors.filter(function(t){return!t.name.toLowerCase().includes(e.toLowerCase())})},a.selectionHandler=function(e){a.setState({isActive:!1,userInput:e.target.innerText,suggestions:[],activeSelection:0})},a.onBlur=Object(J.debounce)(function(){a.setState({isActive:!1}),a.state.userInput||a.props.filmsCount===a.props.films.length||"Movies"!==a.props.activeTab?a.state.userInput||"Actors"!==a.props.activeTab||a.props.actorsFetching():a.props.filmsFetching()},300),a.onKeyDown=function(e){var t=a.state,r=t.suggestions,n=t.activeSelection;if(13===e.keyCode)if(r.length){var s="Movies"===a.props.activeTab?r[n].properties.title:r[n].name;a.setState({isActive:!1,userInput:s,suggestions:[]})}else a.searchClickHandler();if(38===e.keyCode){if(0===n)return;a.setState({activeSelection:n-1})}if(40===e.keyCode){if(n===r.length-1)return;a.setState({activeSelection:n+1})}},a.searchClickHandler=function(){"Movies"===a.props.activeTab?a.props.searchFilm(a.state.userInput):a.props.searchActor(a.state.userInput)},a.renderFilms=function(){return a.props.films.map(function(e,t){return n.a.createElement(P,{key:t,data:e})})},a.renderActors=function(){return a.props.actors.map(function(e,t){var r=a.props.films.filter(function(t){return t.properties.characters.includes(e.url)});return n.a.createElement(R,{key:t,data:Object(p.a)({},e,{films:r})})})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.filmsFetching()}},{key:"render",value:function(){var e=this,t="Movies"===this.props.activeTab?"Enter a movie name":"Enter an actor name";return n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"header"},"STAR WARS"),n.a.createElement("div",{className:"tabs"},n.a.createElement("button",{className:"tab ".concat("Movies"===this.props.activeTab?"active":""),onClick:this.setTab},"Movies"),n.a.createElement("button",{className:"tab ".concat("Actors"===this.props.activeTab?"active":""),onClick:this.setTab},"Actors")),n.a.createElement("div",{className:"search-input"},n.a.createElement("input",{placeholder:t,type:"text",value:this.state.userInput,autoComplete:"off",onBlur:this.onBlur,onChange:this.inputChangeHandler,onKeyDown:this.onKeyDown}),n.a.createElement("button",{className:"search-button",onClick:this.searchClickHandler},n.a.createElement(M.a,{icon:I.c})),this.state.isActive&&this.state.suggestions.length?n.a.createElement("ul",{className:"suggestions"},this.state.suggestions.map(function(t,a){return n.a.createElement("li",{key:a,className:a===e.state.activeSelection?"active-selection":"",onClick:e.selectionHandler},"Movies"===e.props.activeTab?t.properties.title:t.name)})):null),"Movies"===this.props.activeTab?this.props.statusFilms.loading?n.a.createElement(M.a,{className:"loading",icon:I.b}):n.a.createElement("div",{className:"cards-list"},this.renderFilms(),n.a.createElement(K,{totalPages:this.props.filmsPages,items:this.props.films,count:this.props.filmsCount})):this.props.statusActors.loading||this.props.statusFilms.loading?n.a.createElement(M.a,{className:"loading",icon:I.b}):n.a.createElement("div",{className:"cards-list"},this.renderActors(),n.a.createElement(K,{totalPages:this.props.actorsPages,items:this.props.actors,count:this.props.actorsCount})))}}]),t}(r.Component),V=Object(i.b)(function(e){return{films:e.films.data,statusFilms:e.films.status,filmsCount:e.films.count,actors:e.actors.data,statusActors:e.actors.status,actorsCount:e.actors.count,activeTab:e.actors.activeTab,filmsPages:e.films.totalPages,actorsPages:e.actors.totalPages}},{filmsFetching:x,searchFilm:function(e){return function(){var t=Object(b.a)(g.a.mark(function t(a){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,t.next=4,C(e);case 4:r=t.sent,a({type:"ALL_FILMS_FETCHED",payload:r.data}),a({type:F,payload:1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t0});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},actorsFetching:S,searchActor:function(e){return function(){var t=Object(b.a)(g.a.mark(function t(a){var r,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:E}),t.prev=1,t.next=4,N(e);case 4:return r=t.sent,t.next=7,Promise.all(r.data.result.map(function(){var e=Object(b.a)(g.a.mark(function e(t,a){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t.uid);case 2:return r=e.sent,e.abrupt("return",Object(p.a)({},t,r.data.result,{name:t.properties.name,url:t.properties.url}));case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 7:n=t.sent,a({type:y,payload:{results:n}}),a({type:F,payload:1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),a({type:w,payload:t.t0});case 15:case"end":return t.stop()}},t,null,[[1,12]])}));return function(e){return t.apply(this,arguments)}}()},setActiveTab:function(e){return function(t){t({type:T,payload:e})}}})(G),W=(a(78),function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFilm(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.film;return n.a.createElement("div",{className:"container"},n.a.createElement(o.b,{className:"back-link",to:"/"},n.a.createElement(M.a,{className:"icon",icon:I.a})," Back to movies search"),this.props.status.loading?n.a.createElement(M.a,{className:"loading",icon:I.b}):n.a.createElement("div",{className:"details"},n.a.createElement("h2",{className:"film-title"},e.result&&e.result.properties.title),n.a.createElement("p",null,n.a.createElement("span",{className:"bold-start"},"Director: "),e.result&&e.result.properties.director),n.a.createElement("p",null,n.a.createElement("span",{className:"bold-start"},"Producer: "),e.result&&e.result.properties.producer),n.a.createElement("p",null,n.a.createElement("span",{className:"bold-start"},"Release Date: "),e.result&&e.result.properties.release_date),n.a.createElement("p",{className:"bold-start"},"Opening crawl:"),n.a.createElement("p",null,'"',e.result&&e.result.properties.opening_crawl,'"')))}}]),t}(r.Component)),q=Object(i.b)(function(e){return{film:e.films.selectedFilm,status:e.films.status}},{fetchFilm:function(e){return function(){var t=Object(b.a)(g.a.mark(function t(a){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_FETCH_ALL_FILMS"}),t.prev=1,t.next=4,_(e);case 4:r=t.sent,a({type:"FETCH_FILM",payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"FETCH_ALL_FILMS_FAILED",payload:t.t0});case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()}})(W);a(79);var z=function(){return n.a.createElement(o.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(l.a,{exact:!0,path:"/",component:V}),n.a.createElement(l.a,{path:"/film/:id",component:q})))},Q=a(26),U={data:[],count:0,totalPages:1,status:{loading:!1,error:null},selectedFilm:{}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"START_FETCH_ALL_FILMS":return Object(p.a)({},e,{status:{loading:!0,error:null}});case"ALL_FILMS_FETCHED":return Object(p.a)({},e,{data:r.result,count:e.count?e.count:r.result.length,totalPages:Math.ceil(r.result.length/10),status:{loading:!1,error:null}});case"FETCH_ALL_FILMS_FAILED":return Object(p.a)({},e,{status:{loading:!1,error:r}});case"FETCH_FILM":return Object(p.a)({},e,{selectedFilm:r,status:{loading:!1,error:null}});default:return e}},Y={data:[],count:0,totalPages:1,status:{loading:!1,error:null},activeTab:"Movies",activePage:1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case E:return Object(p.a)({},e,{status:{loading:!0,error:null}});case y:return Object(p.a)({},e,{data:r.results,count:r.total_records||r.results.length,totalPages:r.total_pages||r.results.length/10,status:{loading:!1,error:null}});case w:return Object(p.a)({},e,{status:{loading:!1,error:r}});case T:return Object(p.a)({},e,{activeTab:r});case F:return Object(p.a)({},e,{activePage:r});default:return e}},$=a(43),ee=Object(Q.c)(Object(Q.b)({films:X,actors:Z}),Object(Q.a)($.a));c.a.render(n.a.createElement(i.a,{store:ee},n.a.createElement(z,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.fefb3980.chunk.js.map